<template>
  <template if:true={isSelectCard}>
    <div class={actionContainerClass}>
      <div class={actionItemClass}>
        <c-input
          label={label}
          theme="slds"
          name="selectableAction"
          type="checkbox"
          checked={selectableActionVal}
          styles={getCheckboxStyles}
          onchange={fireFlexAction}
        >
        </c-input>
      </div>
    </div>
  </template>
  <template if:false={isSelectCard}>
    <div class={actionContainerClass}>
      <!-- Link Type Action -->
      <a
        href="javascript:void(0)"
        data-action-focus
        if:false={_displayAsButton}
        class={actionItemClass}
        onclick={fireFlexAction}
        aria-label={linkLabel}
      >
        <span if:true={isIconRight} class={actionTextClass} style={labelStyle}
          ><span if:false={_iconOnly} title={label} aria-hidden="true"
            >{label}</span
          >
        </span>
        <div if:true={showIcon} class={iconDivClass}>
          <span if:false={_iconOnly}>
            <c-icon
              if:false={imageRef}
              color={iconColor}
              extraclass={iconClass}
              size={iconSizeDef}
              alternative-text={label}
              icon-name={iconName}
              theme="slds"
              baseurl={iconurl}
            >
            </c-icon>
          </span>

          <span if:true={_iconOnly}>
            <c-tooltip
              if:false={imageRef}
              theme="slds"
              icon-size={iconSizeDef}
              icon-fill={iconColor}
              icon-url={iconUrl}
              content={label}
              arrowposition="bottom-left"
              icon-name={iconName}
              disable-tab="true"
            >
            </c-tooltip>
          </span>
          <span if:true={imageRef} class={iconImgWrapperclass}>
            <img class={iconClass} src={imageRef} alt={label} />
          </span>
        </div>
        <span if:false={isIconRight} class={actionTextClass} style={labelStyle}
          ><span if:false={_iconOnly} title={label}>{label}</span>
        </span>
      </a>
      <!-- Button Type Action -->
      <span if:true={_displayAsButton} onclick={fireFlexAction}>
        <template if:true={showIcon}>
          <template if:true={isPopoverFlyout}>
            <c-button
              if:false={_iconOnly}
              theme="slds"
              variant={buttonVariant}
              label={label}
              styles={styles}
              icon-name={iconName}
              icon-size={iconSizeDef}
              icon-position="left"
              icon-fill={iconColor}
              data-action-focus
              disabled={_disabled}
              aria-label={buttonAriaLabel}
              aria-haspopup="dialog"
            >
            </c-button>
          </template>
          <template if:false={isPopoverFlyout}>
            <c-button
              if:false={_iconOnly}
              theme="slds"
              variant={buttonVariant}
              label={label}
              styles={styles}
              icon-name={iconName}
              icon-size={iconSizeDef}
              icon-position="left"
              icon-fill={iconColor}
              data-action-focus
              disabled={_disabled}
              aria-label={buttonAriaLabel}
            >
            </c-button>
          </template>
          <c-tooltip
            if:true={_iconOnly}
            theme="slds"
            icon-size={iconSizeDef}
            icon-fill={iconColor}
            arrowposition="bottom-left"
            variant={buttonVariant}
            content={label}
            icon-name={iconName}
          ></c-tooltip>
        </template>
        <template if:false={showIcon}>
          <c-button
            if:true={isPopoverFlyout}
            theme="slds"
            variant={buttonVariant}
            label={label}
            styles={styles}
            icon-size={iconSizeDef}
            icon-position="left"
            icon-fill={iconColor}
            data-action-focus
            disabled={_disabled}
            aria-label={buttonAriaLabel}
            aria-haspopup="dialog"
          >
          </c-button>
          <c-button
            if:false={isPopoverFlyout}
            theme="slds"
            variant={buttonVariant}
            label={label}
            styles={styles}
            icon-size={iconSizeDef}
            icon-position="left"
            icon-fill={iconColor}
            data-action-focus
            disabled={_disabled}
            aria-label={buttonAriaLabel}
          >
          </c-button>
        </template>
      </span>
    </div>
  </template>
  <div if:true={isPopoverFlyout}>
    <c-popover
      class="popover-flyout"
      title="Test"
      theme="slds"
      icon-url={iconUrl}
      style="position: relative; top: 0rem; left: 0rem; right: 0rem;"
      nubbinposition="top-left"
      size="full-width"
      id="popover-id"
      channel-name={flyoutChannel}
      onclose={closePopOver}
    >
      <div if:true={renderFlyout} slot="content">
        <template if:true={preloadFlyout}>
          <slot name="popoverflyout"></slot>
        </template>
      </div>
    </c-popover>
  </div>
  <template if:true={isModalFlyout}>
    <c-modal
      size="medium"
      onclose={onCloseModal}
      onopen={onOpenModal}
      class="actionFlyout"
      title={label}
      hideheader="true"
      hidefooter="true"
      channel-name={flyoutChannel}
    >
      <div if:true={renderFlyout} slot="content" class="slds-is-relative">
        <template if:true={preloadFlyout}>
          <slot name="modalflyout"></slot>
        </template>
      </div>
    </c-modal>
  </template>
  <c-navigate-action
    if:true={actionDetails}
    class="navigate-action"
    open-target-in={actionDetails.openUrl}
    target-params={actionDetails.targetParams}
    target-type={actionDetails.targetType}
    target-action={actionDetails.targetAction}
    target-id={actionDetails.targetId}
    data-name={label}
    replace={actionDetails.replace}
    target-relationship={actionDetails.targetRelationship}
    target-name={actionDetails.targetName}
    target-article-type={actionDetails.targetArticleType}
  >
  </c-navigate-action>
</template>
